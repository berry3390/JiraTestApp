name: CI

on:
  push:
    branches:
      - master
      - develop
      - 'develop/**'
  pull_request:
    branches:
      - master
      - develop

jobs:
  build_and_test:
    runs-on: ubuntu-latest
    env:  
      aos_version: ''
    steps:
    - name: Check out
      uses: actions/checkout@v3
    - name: la -al
      run: ls -al
    - name: cat 
      run: | 
        cat app/build.gradle > test.json
    - name: get build version 1
      run: | 
        cat app/build.gradle | grep 'versionName'|tr -d 'versionName','/"' | tr -d ' ' > env.aos_version
    - name: get build version 2
      run: | 
        cat test.json | grep 'versionName'|tr -d 'versionName','/"' | tr -d ' '  > c.json
        cat c.json
        cat aos_version
        echo "aos_version: ${{ env.aos_version }}"

